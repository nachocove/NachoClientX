// This file has been autogenerated from a class added in the UI designer.

using System;
using System.IO;
using MonoTouch.Foundation;
using MonoTouch.UIKit;
using System.Drawing;
using NachoCore.Utils;

namespace NachoClient.iOS
{
    public partial class HomePageController : UIViewController
    {
        //loads the HomePageController.xib file and connects it to this object
        public HomePageController (int pageIndex) : base ("HomePageController", null)
        {
            this.PageIndex = pageIndex;
        }

        public int PageIndex {
            get;
            private set;
        }

        const string TutPageOne = "Content/HomePage1.png";
        const string TutPageTwo = "Content/PageTwo.png";
        const string TutPageThree = "Content/PageThree.png";
        const string TutPageFour = "Content/PageFour.png";
        const string TutPageFive = "Content/PageFive.png";
        const string TutPageSix = "Content/PageSix.png";
        const string TutPageSeven = "Content/PageSeven.png";
        string[] Tutorial = {
            TutPageOne,
            TutPageTwo,
            TutPageThree,
            TutPageFour,
            TutPageFive,
            TutPageSix,
            TutPageSeven
        };

        public override void ViewDidLoad ()
        {
            UIWebView tutorialText = new UIWebView (this.View.Frame);
           
            string fileName = Tutorial [this.PageIndex];
            string localUrl = System.IO.Path.Combine (NSBundle.MainBundle.BundlePath, fileName);

            base.ViewDidLoad ();
            tutorialText.LoadRequest (new NSUrlRequest (new NSUrl (localUrl, false)));
            tutorialText.ScalesPageToFit = true;
            this.View.AddSubview (tutorialText);


            Log.Info (Log.LOG_UI, "Book page #{0} loaded!", this.PageIndex + 1);
            Log.Info (Log.LOG_UI, "{0}", this.View.Frame.ToString ());
        }

        public override void ViewWillAppear (bool animated)
        {
            base.ViewWillAppear (animated);
            if (null != this.NavigationController) {
                this.NavigationController.ToolbarHidden = true;
            }
        }
    }
}
