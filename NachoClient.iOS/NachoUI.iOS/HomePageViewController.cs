// This file has been autogenerated from a class added in the UI designer.

using System;
using System.IO;
using Foundation;
using UIKit;
using CoreGraphics;
using CoreAnimation;
using System.Collections.Generic;
using NachoCore.Model;
using NachoCore.Utils;

// Animation guide http://developer.xamarin.com/guides/cross-platform/application_fundamentals/touch/part_1_touch_in_ios/

namespace NachoClient.iOS
{
    public partial class HomePageController : NcUIViewController
    {
        public HomeViewController owner;

        // container for iPhone screen-in-screen
        // doing these as internal globals
        protected UIView pageContainerView;
        // full screen

        protected const float DESCRIPTION_TEXT_WIDTH = 284;
        //As defined by Hugo
        // the phone-image content
        protected UIView imageContainer;

        // the helpful text container
        protected UIView helperTextContainer;

        // text Title
        protected UILabel helperTitleText;

        // text Body
        protected UIWebView helperWebView;

        protected UIView pageView;
        protected UIView contentView;

        //View Zero Components
        protected NSTimer viewZeroTimer;
        protected UILabel swipeLabel;
        protected List<UIImageView> swipeLeftArrows = new List<UIImageView> ();
        protected CGPoint swipeLabelCenter;
        protected bool viewZeroShouldAnimate = false;

        //View One Components
        protected UIImageView redButton;
        protected UIImageView redToolTip;
        protected UIImageView greenButton;
        protected UIImageView greenToolTip;

        protected NSTimer toolTipTimer;

        //View Two Components
        protected UIImageView mailRedDot;
        protected UIImageView nachoCardOne;
        protected UIImageView nachoCardTwo;

        protected CGPoint mailRedDotCenter;
        protected CGPoint nachoCardOneCenter;
        protected CGPoint nachoCardTwoCenter;

        protected NSTimer flashOneTimer;
        protected NSTimer flashTwoTimer;
        protected NSTimer swipeMailUpTimer;
        protected NSTimer swipeMailDownTimer;

        //View Three Components
        protected UIImageView pullDownDotView;
        protected UIImageView meetingMessage;
        protected UIImageView calendarMessage;
        protected UIImageView calendarDotView;

        protected NSTimer flashPullDotTimer;

        //View Four Components
        protected UIImageView emailCellView;
        protected UIImageView swipeLeftImageView;
        protected UIImageView swipeRightImageView;
        protected UIImageView swipeDotView;

        protected CGPoint emailCellViewCenter;
        protected CGPoint swipeLeftCenter;
        protected CGPoint swipeRightCenter;
        protected CGPoint swipeDotCenter;

        protected NSTimer flashDotsFirstTimer;
        protected NSTimer swipeLeftTimer;
        protected NSTimer revertLeftToCenterTimer;
        protected NSTimer flashDotsSecondTimer;
        protected NSTimer swipeRightTimer;
        protected NSTimer revertRightToCenterTimer;
        protected NSTimer moveDotsTimer;

        public McAccount.AccountServiceEnum Service = McAccount.AccountServiceEnum.None;

        public HomePageController (int pageIndex) : base ("HomePageController", null)
        {
            this.PageIndex = pageIndex;
            owner = null;
        }

        public int PageIndex {
            get;
            private set;
        }

        // Helper Text Strings
        const string TitleZero = "Welcome to Apollo Mail";
        const string TitleOne = "Your Email";
        const string TitleTwo = "Navigating Your Hot List";
        const string TitleThree = "Your Meetings and Events";
        const string TitleFour = "Just One Last Thing ...";

        const string BodyZero = "This tutorial will help you use <br> Apollo Mail";
        const string BodyOne = "Important messages go to your <font color=\"FF3F20\">Hot List</font>. <br> All messages can be found in <font color=\"1CCEC2\">Mail</font>.";
        const string BodyTwo = "Quickly browse through your Hot <br> List by swiping up and down.";
        const string BodyThree = "Your next meeting is <font color=\"FF3F20\">here</font>. Manage <br> your schedule using <font color=\"1CCEC2\">Calendar</font>.";
        const string BodyFour = "Sliding right or left elsewhere will get you <br> shortcuts and options for the items";

        const string contentscreen = "Slide1-3";
        // phone-face image
        const string calendarpull = "Slide1-2";
        // calendar pull down
        const string msg1loc = "Slide1-1A";
        // Meagan message
        const string msg2loc = "Slide1-1B";
        // next message
        const string inboxloc = "Slide1-4";
        // inbox msg at bottom of screen

        string[] titleText = {
            TitleZero,
            TitleOne,
            TitleTwo,
            TitleThree,
            TitleFour
        };
        string[] bodyText = {
            BodyZero,
            BodyOne,
            BodyTwo,
            BodyThree,
            BodyFour,
        };

        public override void ViewDidLoad ()
        {
            base.ViewDidLoad ();

            this.pageContainerView = new UIView (new CGRect (0, 0, this.owner.View.Frame.Width, this.owner.View.Frame.Height));
            pageContainerView.BackgroundColor = A.Color_NachoGreen;

            var textContainerHeight = 100 * GetPositionScale ();
            var helperTitleTextYVal = textContainerHeight / 2 - 40;

            this.helperTextContainer = new UIView (new CGRect (0, pageContainerView.Frame.Height - textContainerHeight - 25, pageContainerView.Frame.Width, textContainerHeight));// contains the helpertext and labels  
            this.helperTitleText = new UILabel (new CGRect (0, helperTitleTextYVal, helperTextContainer.Frame.Width, 20));
            this.helperWebView = new UIWebView (new CGRect ((helperTextContainer.Frame.Width - DESCRIPTION_TEXT_WIDTH) / 2, helperTitleText.Frame.Bottom, DESCRIPTION_TEXT_WIDTH, 50));
            this.imageContainer = new UIView (new CGRect (pageContainerView.Frame.Width / 2 - GetContentSize ().Width / 2, helperTextContainer.Frame.Top - GetContentSize ().Height, GetContentSize ().Width, GetContentSize ().Height)); // see size of helpercontainer

            pageView = new UIView (pageContainerView.Frame);
            contentView = new UIView (imageContainer.Frame);

            string leftNachos = "";
            string rightNachos = "";

            switch (this.PageIndex) {
            case 0:
                CreateViewZero ();
                break;
            case 1:
                leftNachos = "BG-S02Left";
                rightNachos = "BG-S02Right";
                CreateViewOne ();
                break;
            case 2:
                leftNachos = "BG-S03Left";
                rightNachos = "BG-S03Right";
                CreateViewTwo ();
                break;
            case 3:
                leftNachos = "BG-S04Left";
                rightNachos = "BG-S04Right";
                CreateViewThree ();
                break;
            case 4:
                leftNachos = "BG-S05Left";
                rightNachos = "BG-S05Right";
                CreateViewFour ();
                break;
            }

            this.View.AddSubview (pageContainerView);
            this.View.AddSubview (pageView);
            if (this.PageIndex != 0) {
                CreateNachos (leftNachos, rightNachos);
            }
        }

        public override void ViewWillDisappear (bool animated)
        {
            base.ViewWillDisappear (animated);
        }

        public override void ViewDidDisappear (bool animated)
        {
            base.ViewDidDisappear (animated);

            switch (this.PageIndex) {
            case 0:
                ResetViewZero ();
                break;
            case 1:
                ResetViewOne ();
                break;
            case 2:
                ResetViewTwo ();
                break;
            case 3:
                ResetViewThree ();
                break;
            case 4:
                ResetViewFour ();
                break;
            }
        }

        public override void ViewWillAppear (bool animated)
        {
            base.ViewWillAppear (animated);

            if (null != this.NavigationController) {
                this.NavigationController.ToolbarHidden = true;
            }
            if (this.owner == null) {
                NcAssert.True (false, "Tutorial Page has no owner");
            } else {
                this.owner.pageDots.CurrentPage = this.PageIndex; // update containerView.PageDots
            }

            switch (this.PageIndex) {
            case 3:
                owner.closeTutorial.SetTitle ("Dismiss", UIControlState.Normal);
                break;
            case 4:
                owner.closeTutorial.SetTitle ("Go to Apollo Mail", UIControlState.Normal);
                break;
            }
        }

        public override void ViewDidAppear (bool animated)
        {
            base.ViewDidAppear (animated);
            switch (this.PageIndex) {
            case 0:
                ResetViewZero ();
                viewZeroShouldAnimate = true;
                viewZeroTimer = NSTimer.CreateScheduledTimer (2, delegate {
                    AnimateViewZero (0);
                });
                break;
            case 1:
                ResetViewOne ();
                AnimateViewOne ();
                break;
            case 2:
                ResetViewTwo ();
                AnimateViewTwo ();
                break;
            case 3:
                owner.closeTutorial.SetTitle ("Dismiss", UIControlState.Normal);
                ResetViewThree ();
                AnimateViewThree ();
                break;
            case 4:
                owner.closeTutorial.SetTitle ("Go to Apollo Mail", UIControlState.Normal);
                ResetViewFour ();
                AnimateViewFour ();
                break;
            }
        }

        private CGSize GetContentSize ()
        {
            UIImageView contentImage;
            using (var image = UIImage.FromBundle (Util.GetImage ("Slide03BG"))) {
                contentImage = new UIImageView (image);
            }
            return new CGSize (contentImage.Frame.Width, contentImage.Frame.Height);
        }

        private void CreateNachos (string leftNachos, string rightNachos)
        {
            UIImageView leftSideNachos = new UIImageView (UIImage.FromBundle (Util.GetImage (leftNachos)));
            leftSideNachos.Frame = new CGRect (0, this.imageContainer.Frame.Bottom - leftSideNachos.Frame.Height, this.imageContainer.Frame.X, leftSideNachos.Frame.Height);
            this.View.AddSubview (leftSideNachos);

            UIImageView rightSideNachos = new UIImageView (UIImage.FromBundle (Util.GetImage (rightNachos)));
            rightSideNachos.Frame = new CGRect (this.imageContainer.Frame.X + this.imageContainer.Frame.Width, this.imageContainer.Frame.Bottom - rightSideNachos.Frame.Height, this.imageContainer.Frame.X, rightSideNachos.Frame.Height);
            this.View.AddSubview (rightSideNachos);
        }

        void CreateHelperText ()
        {
            helperTextContainer.BackgroundColor = UIColor.White;

            helperTitleText.BackgroundColor = UIColor.White; // debug
            helperTitleText.TextColor = A.Color_11464F;
            helperTitleText.Text = titleText [this.PageIndex];
            helperTitleText.Font = A.Font_AvenirNextDemiBold17;
            helperTitleText.TextAlignment = UITextAlignment.Center;
            helperTextContainer.Add (helperTitleText);

            helperWebView.LoadHtmlString (
                "<html>" +
                "<style>" +
                "body {font-family:\"avenir next\";font-size:14px;font-style:normal;font-weight:400;color: 444444; text-align:center;}" +
                "</style>" +
                "<body>" +
                bodyText [this.PageIndex] +
                "</body>" +
                "</html>", new NSUrl ("about:blank"));
            helperTextContainer.Add (helperWebView);
        }

        // Can't get this to look good with green navbar on green background...keeping code in case we want to revisit
        protected void CreateFakeNavbar ()
        {
            if (Service != McAccount.AccountServiceEnum.None) {
                var width = imageContainer.Frame.Width;
                var scale = width / 320.0f;
                var height = scale * 64.0f;
                var navbar = new UIView (new CGRect (imageContainer.Frame.X, imageContainer.Frame.Y - height, width, height));
                navbar.BackgroundColor = A.Color_NachoGreen;
                var accountButton = new UIView (new CGRect (0, 0, scale * 44.0f, scale * 44.0f));
                accountButton.BackgroundColor = A.Color_NachoGreen;
                accountButton.Layer.CornerRadius = accountButton.Frame.Width / 2.0f;
                accountButton.ClipsToBounds = true;
                var avatar = new UIImageView (new CGRect (0, 0, scale * 40.0f, scale * 40.0f));
                avatar.Layer.CornerRadius = avatar.Frame.Width / 2.0f;
                avatar.ClipsToBounds = true;
                avatar.ContentMode = UIViewContentMode.ScaleAspectFill;
                var imageName = Util.GetAccountServiceImageName (Service);
                using (var image = UIImage.FromBundle (imageName)) {
                    avatar.Image = image;
                }
                accountButton.AddSubview (avatar);
                avatar.Center = new CGPoint (accountButton.Frame.Width / 2.0f, accountButton.Frame.Height / 2.0f);
                navbar.AddSubview (accountButton);
                accountButton.Center = new CGPoint (width / 2.0f, navbar.Frame.Height - 20.0f * scale);
                pageContainerView.AddSubview (navbar);
            }
        }

        protected void CreateViewZero ()
        {
            UIImageView theNachos;
            using (var image = UIImage.FromBundle (Util.GetImage ("BG-S01"))) {
                theNachos = new UIImageView (image);
            }
            theNachos.Frame = new CGRect (0, this.imageContainer.Frame.Bottom - theNachos.Frame.Height, theNachos.Frame.Width, theNachos.Frame.Height);
            pageContainerView.AddSubview (theNachos);

            UIImageView nachoLogoImageView;
            using (var image = UIImage.FromBundle ("Bootscreen-1")) {
                nachoLogoImageView = new UIImageView (image);
            }
            nachoLogoImageView.Center = new CGPoint (pageContainerView.Center.X, 130 * GetPositionScale () + nachoLogoImageView.Frame.Width / 2);
            pageContainerView.AddSubview (nachoLogoImageView);

            swipeLabel = new UILabel (new CGRect (pageContainerView.Frame.Width / 2 - 75 + 150, nachoLogoImageView.Frame.Bottom + 24, 150, 20));
            swipeLabel.Font = A.Font_AvenirNextMedium14;
            swipeLabel.Text = "Swipe left to continue";
            swipeLabel.TextColor = A.Color_NachoYellow;
            swipeLabel.TextAlignment = UITextAlignment.Center;
            swipeLabel.Alpha = 0.0f;
            swipeLabelCenter = swipeLabel.Center;
            pageContainerView.AddSubview (swipeLabel);

            for (int i = 0; i < 10; i++) {
                var tempSwipeArrow = new UIImageView ();
                using (var image = UIImage.FromBundle (Util.GetImage ("SlideNav-SwipeArrow"))) {
                    tempSwipeArrow = new UIImageView (image);
                }
                tempSwipeArrow.Center = new CGPoint (swipeLabel.Frame.X - 10 - (i * 15), swipeLabel.Center.Y);
                tempSwipeArrow.Alpha = 0.0f;
                swipeLeftArrows.Add (tempSwipeArrow);
                pageContainerView.AddSubview (tempSwipeArrow);
            }

            CreateHelperText ();
            pageContainerView.AddSubview (helperTextContainer);
        }

        protected void CreateViewOne ()
        {
            UIImageView nachoNowImageView = new UIImageView ();
            using (var image = UIImage.FromBundle (Util.GetImage ("Slide02BG"))) {
                nachoNowImageView.Image = image;
            }
            nachoNowImageView.Frame = (new CGRect (0, 0, imageContainer.Frame.Width , imageContainer.Frame.Height));
            imageContainer.AddSubview (nachoNowImageView);

            using (var image = UIImage.FromBundle (Util.GetImage ("Slide02RedMarker"))) {
                redButton = new UIImageView (image);
            }
            redButton.Center = new CGPoint (this.imageContainer.Frame.Width / 2, this.imageContainer.Frame.Height / 4);
            redButton.Layer.Transform = CATransform3D.MakeScale (0.0f, 0.0f, 1.0f);
            imageContainer.AddSubview (redButton);

            using (var image = UIImage.FromBundle (Util.GetImage ("Slide02MessageUp"))) {
                redToolTip = new UIImageView (image);
            }
            redToolTip.Center = new CGPoint (this.imageContainer.Frame.Width / 2, this.imageContainer.Frame.Height / 4 + 35 * GetImageScale ());
            redToolTip.Layer.Transform = CATransform3D.MakeScale (0.0f, 0.0f, 1.0f);
            imageContainer.AddSubview (redToolTip);

            using (var image = UIImage.FromBundle (Util.GetImage ("Slide02TealMarker"))) {
                greenButton = new UIImageView (image);
            }
            greenButton.Center = new CGPoint (this.imageContainer.Frame.Width / 2, this.imageContainer.Frame.Height - 25 * GetImageScale ());
            greenButton.Layer.Transform = CATransform3D.MakeScale (0.0f, 0.0f, 1.0f);
            imageContainer.AddSubview (greenButton);

            using (var image = UIImage.FromBundle (Util.GetImage ("Slide02MessageDown"))) {
                greenToolTip = new UIImageView (image);
            }
            greenToolTip.Center = new CGPoint (this.imageContainer.Frame.Width / 2, this.imageContainer.Frame.Height - 60 * GetImageScale ());
            greenToolTip.Layer.Transform = CATransform3D.MakeScale (0.0f, 0.0f, 1.0f);
            imageContainer.AddSubview (greenToolTip);

            CreateHelperText ();
            imageContainer.ClipsToBounds = true;
            pageContainerView.AddSubview (imageContainer);
            pageContainerView.AddSubview (helperTextContainer);
        }

        protected void CreateViewTwo ()
        {
            UIImageView nachoGrayBackground = new UIImageView ();
            using (var image = UIImage.FromBundle (Util.GetImage ("Slide03BG"))) {
                nachoGrayBackground.Image = image;
            }
            nachoGrayBackground.Frame = (new CGRect (0, 0, imageContainer.Frame.Width, imageContainer.Frame.Height));
            imageContainer.AddSubview (nachoGrayBackground);

            UIImageView nachoNowBackground = new UIImageView ();
            using (var image = UIImage.FromBundle (Util.GetImage ("Slide03MidBG"))) {
                nachoNowBackground.Image = image;
            }
            nachoNowBackground.Frame = (new CGRect (0, 0, imageContainer.Frame.Width, imageContainer.Frame.Height));
            imageContainer.AddSubview (nachoNowBackground);

            nachoCardOne = new UIImageView ();
            using (var image = UIImage.FromBundle (Util.GetImage ("Slide03Card01"))) {
                nachoCardOne.Image = image;
            }
            nachoCardOne.Frame = (new CGRect (0, 0, nachoCardOne.Image.Size.Width + 1, nachoCardOne.Image.Size.Height + 1));
            nachoCardOneCenter = nachoCardOne.Center;

            UIView cardHolderView = new UIView (new CGRect ((GetContentSize ().Width - nachoCardOne.Frame.Width) / 2f + .5f, 56.5f * GetImageScale (), nachoCardOne.Frame.Width, nachoCardOne.Frame.Height));
            cardHolderView.Layer.CornerRadius = 4f;
            cardHolderView.ClipsToBounds = true;
            imageContainer.AddSubview (cardHolderView);
            cardHolderView.AddSubview (nachoCardOne);

            nachoCardTwo = new UIImageView ();
            using (var image = UIImage.FromBundle (Util.GetImage ("Slide03Card02"))) {
                nachoCardTwo.Image = image;
            }
            nachoCardTwo.Frame = (new CGRect (0, nachoCardOne.Frame.Bottom + 15, cardHolderView.Frame.Width, cardHolderView.Frame.Height));
            nachoCardTwoCenter = nachoCardTwo.Center;
            cardHolderView.AddSubview (nachoCardTwo);

            mailRedDot = new UIImageView (UIImage.FromBundle (Util.GetImage ("Slide02RedMarker")));
            mailRedDot.Center = new CGPoint (nachoCardOne.Center.X, nachoCardOne.Center.Y + 30 * GetImageScale ());
            mailRedDotCenter = mailRedDot.Center;
            cardHolderView.AddSubview (mailRedDot);

            CreateHelperText ();
            contentView.ClipsToBounds = true;
            pageView.AddSubview (imageContainer);
            pageView.AddSubview (helperTextContainer);
        }

        protected void CreateViewThree ()
        {
            // Picture of the message
            UIImageView calendarBackground = new UIImageView ();
            using (var image = UIImage.FromBundle (Util.GetImage ("Slide04BG"))) {
                calendarBackground.Image = image;
            }
            calendarBackground.Frame = (new CGRect (0, 0, imageContainer.Frame.Width, imageContainer.Frame.Height));
            imageContainer.AddSubview (calendarBackground);

            // "Next Meeting Here"
            using (var image = UIImage.FromBundle (Util.GetImage ("Slide04MessageUp"))) {
                meetingMessage = new UIImageView (image);
            }
            meetingMessage.Frame = (new CGRect (imageContainer.Frame.Width / 2 - meetingMessage.Frame.Width / 2, 43 * GetImageScale (), meetingMessage.Frame.Width, meetingMessage.Frame.Height));
            meetingMessage.Layer.Transform = CATransform3D.MakeScale (0.0f, 0.0f, 1.0f);
            imageContainer.AddSubview (meetingMessage);

            // Red dot
            using (var image = UIImage.FromBundle (Util.GetImage ("Slide02RedMarker"))) {
                pullDownDotView = new UIImageView (image);
            }
            pullDownDotView.Center = new CGPoint (meetingMessage.Center.X, 25 * GetImageScale ());
            pullDownDotView.Layer.Transform = CATransform3D.MakeScale (0.0f, 0.0f, 1.0f);
            imageContainer.AddSubview (pullDownDotView);

            // "All Meetings Here"
            using (var image = UIImage.FromBundle (Util.GetImage ("Slide02MessageDown-Meetings"))) {
                calendarMessage = new UIImageView (image);
            }
            var c = (this.imageContainer.Frame.Width / 4) + 9;
            calendarMessage.Center = new CGPoint (c, this.imageContainer.Frame.Height - 60 * GetImageScale ());
            calendarMessage.Layer.Transform = CATransform3D.MakeScale (0.0f, 0.0f, 1.0f);
            imageContainer.AddSubview (calendarMessage);

            // Green dot
            using (var image = UIImage.FromBundle (Util.GetImage ("Slide02TealMarker"))) {
                calendarDotView = new UIImageView (image);
            }
            calendarDotView.Center = new CGPoint (c, this.imageContainer.Frame.Height - 25 * GetImageScale ());
            calendarDotView.Layer.Transform = CATransform3D.MakeScale (0.0f, 0.0f, 1.0f);
            imageContainer.AddSubview (calendarDotView);

            CreateHelperText ();
            imageContainer.ClipsToBounds = true;
            pageContainerView.AddSubview (imageContainer);
            pageContainerView.AddSubview (helperTextContainer);
        }

        protected nfloat GetImageScale ()
        {
            UIImage myScaledImage = UIImage.FromBundle (Util.GetImage ("Slide03Card01"));
            UIImage originalImage = UIImage.FromBundle ("Slide03Card01@2x");
            return myScaledImage.Size.Height / originalImage.Size.Height;
        }

        protected nfloat GetPositionScale ()
        {
            return owner.View.Frame.Height / 480f;
        }

        private void CreateViewFour ()
        {
            UIImageView inboxBackgroundImageView = new UIImageView ();
            using (var image = UIImage.FromBundle (Util.GetImage ("Slide05BG"))) {
                inboxBackgroundImageView.Image = image;
            }
            inboxBackgroundImageView.Frame = (new CGRect (0, 0, imageContainer.Frame.Width, imageContainer.Frame.Height));
            imageContainer.AddSubview (inboxBackgroundImageView);

            using (var image = UIImage.FromBundle (Util.GetImage ("Slide05SwipeRight"))) {
                swipeRightImageView = new UIImageView (image);
            }
            swipeRightImageView.Frame = new CGRect (-swipeRightImageView.Frame.Width, 0, swipeRightImageView.Frame.Width, swipeRightImageView.Frame.Height);
            swipeRightCenter = swipeRightImageView.Center;
            imageContainer.AddSubview (swipeRightImageView);

            using (var image = UIImage.FromBundle (Util.GetImage ("Slide05Email"))) {
                emailCellView = new UIImageView (image);
            }
            emailCellView.Frame = new CGRect (0, 0, this.imageContainer.Frame.Width, emailCellView.Frame.Height);
            emailCellViewCenter = emailCellView.Center;
            imageContainer.AddSubview (emailCellView);

            using (var image = UIImage.FromBundle (Util.GetImage ("Slide05SwipeLeft"))) {
                swipeLeftImageView = new UIImageView (image);
            }
            swipeLeftImageView.Frame = new CGRect (this.imageContainer.Frame.Width, 0, swipeLeftImageView.Frame.Width, swipeLeftImageView.Frame.Height);
            swipeLeftCenter = swipeLeftImageView.Center;
            imageContainer.AddSubview (swipeLeftImageView);

            swipeDotView = new UIImageView (UIImage.FromBundle (Util.GetImage ("Slide02RedMarker")));
            swipeDotView.Center = new CGPoint (emailCellView.Center.X + 30 * GetImageScale (), emailCellView.Center.Y);
            swipeDotCenter = swipeDotView.Center;
            imageContainer.AddSubview (swipeDotView);

            CreateHelperText ();
            imageContainer.ClipsToBounds = true;
            pageContainerView.AddSubview (imageContainer);
            pageContainerView.AddSubview (helperTextContainer);
        }

        protected void AnimateViewZero (int i)
        {
            if (viewZeroShouldAnimate) {
                if (i < 10) {
                    if (i == 5) {
                        //Starts sliding in the 'Swipe left...' text
                        AnimateViewZeroPartTwo ();
                    }
                    UIView.Animate (.2, 0, (UIViewAnimationOptions.CurveLinear | UIViewAnimationOptions.OverrideInheritedDuration), () => {
                        //Turns on arrows one at a time from right to left
                        swipeLeftArrows [i].Alpha = 1.0f;
                        //Decreases alpha of all the arrows prior to it
                        for (int j = 0; j < i; j++) {
                            swipeLeftArrows [j].Alpha -= .2f;
                        }
                    }, () => {
                        i++;
                        AnimateViewZero (i);
                    });
                } else if (i >= 10 && i < 16) {
                    UIView.Animate (.2, 0, (UIViewAnimationOptions.CurveLinear | UIViewAnimationOptions.OverrideInheritedDuration), () => {
                        //At this point all arrows are turned on, now we just need to decrease
                        //their alpha so they disappear
                        for (int k = 5; k < 10; k++) {
                            if (swipeLeftArrows [k].Alpha > 0) {
                                swipeLeftArrows [k].Alpha -= .2f;
                            }
                        }
                    }, () => {
                        i++;
                        AnimateViewZero (i);
                    });
                } else {
                    return;
                }
            }
        }

        //Slides in the 'Swipe left to...' text, increases alpha while it slides in
        protected void AnimateViewZeroPartTwo ()
        {
            if (viewZeroShouldAnimate) {
                UIView.Animate (2, 0, (UIViewAnimationOptions.CurveLinear | UIViewAnimationOptions.OverrideInheritedDuration), () => {
                    swipeLabel.Alpha = 1.0f;
                    swipeLabel.Center = new CGPoint (swipeLabel.Center.X - 150, swipeLabel.Center.Y);
                }, () => {
                });
            }
        }

        protected void AnimateViewOne ()
        {
            toolTipTimer = NSTimer.CreateScheduledTimer (1, delegate {
                UIView.AnimateKeyframes (1, 0, UIViewKeyframeAnimationOptions.OverrideInheritedDuration, () => {
                    UIView.AddKeyframeWithRelativeStartTime (0, 1, () => {
                        redButton.Layer.Transform = CATransform3D.MakeScale (1.0f, 1.0f, 1.0f);
                        redToolTip.Layer.Transform = CATransform3D.MakeScale (1.0f, 1.0f, 1.0f);
                        greenButton.Layer.Transform = CATransform3D.MakeScale (1.0f, 1.0f, 1.0f);
                        greenToolTip.Layer.Transform = CATransform3D.MakeScale (1.0f, 1.0f, 1.0f);
                    });
                }, ((bool finished) => {
                }));
            });
        }

        protected void AnimateViewTwo ()
        {
            flashOneTimer = NSTimer.CreateScheduledTimer (.5, delegate {
                UIView.AnimateKeyframes (2, 0, UIViewKeyframeAnimationOptions.OverrideInheritedDuration, () => {
                    UIView.AddKeyframeWithRelativeStartTime (0, .5, () => {
                        mailRedDot.Alpha = 0.5f;
                    });

                    UIView.AddKeyframeWithRelativeStartTime (.5, .5, () => {
                        mailRedDot.Alpha = 1.0f;
                    });
                }, ((bool finished) => {
                }));
            });

            swipeMailUpTimer = NSTimer.CreateScheduledTimer (2.5, delegate {
                UIView.AnimateKeyframes (1, 0, UIViewKeyframeAnimationOptions.OverrideInheritedDuration, () => {
                    UIView.AddKeyframeWithRelativeStartTime (0, 1, () => {
                        mailRedDot.Center = new CGPoint (mailRedDot.Center.X, mailRedDot.Center.Y - (nachoCardOne.Frame.Height + 15));
                        nachoCardOne.Center = new CGPoint (nachoCardOne.Center.X, nachoCardOne.Center.Y - (nachoCardOne.Frame.Height + 15));
                        nachoCardTwo.Center = new CGPoint (nachoCardTwo.Center.X, nachoCardTwo.Center.Y - (nachoCardOne.Frame.Height + 15));
                    });
                }, ((bool finished) => {
                }));
            });

            flashTwoTimer = NSTimer.CreateScheduledTimer (3.6, delegate {
                mailRedDot.Center = new CGPoint (mailRedDotCenter.X, mailRedDotCenter.Y - 80 * GetImageScale ());
                UIView.AnimateKeyframes (2.1, 0, UIViewKeyframeAnimationOptions.OverrideInheritedDuration, () => {
                    UIView.AddKeyframeWithRelativeStartTime (0, .5, () => {
                        mailRedDot.Alpha = .5f;
                    });
                    UIView.AddKeyframeWithRelativeStartTime (.5, .5, () => {
                        mailRedDot.Alpha = 1.0f;
                    });
                }, ((bool finished) => {
                }));
            });

            swipeMailDownTimer = NSTimer.CreateScheduledTimer (5.7, delegate {
                UIView.AnimateKeyframes (1, 0, UIViewKeyframeAnimationOptions.OverrideInheritedDuration, () => {
                    UIView.AddKeyframeWithRelativeStartTime (0, 1, () => {
                        mailRedDot.Center = new CGPoint (mailRedDot.Center.X, mailRedDot.Center.Y + (nachoCardOne.Frame.Height + 15));
                        nachoCardOne.Center = new CGPoint (nachoCardOne.Center.X, nachoCardOne.Center.Y + (nachoCardOne.Frame.Height + 15));
                        nachoCardTwo.Center = new CGPoint (nachoCardTwo.Center.X, nachoCardTwo.Center.Y + (nachoCardOne.Frame.Height + 15));
                    });
                }, ((bool finished) => {
                }));
            });
        }

        public void AnimateViewThree ()
        {
            flashPullDotTimer = NSTimer.CreateScheduledTimer (1, delegate {
                UIView.AnimateKeyframes (1, 0, UIViewKeyframeAnimationOptions.OverrideInheritedDuration, () => {
                    UIView.AddKeyframeWithRelativeStartTime (0, 1, () => {
                        pullDownDotView.Layer.Transform = CATransform3D.MakeScale (1.0f, 1.0f, 1.0f);
                        meetingMessage.Layer.Transform = CATransform3D.MakeScale (1.0f, 1.0f, 1.0f);
                        calendarMessage.Layer.Transform = CATransform3D.MakeScale (1.0f, 1.0f, 1.0f);
                        calendarDotView.Layer.Transform = CATransform3D.MakeScale (1.0f, 1.0f, 1.0f);
                    });
                }, ((bool finished) => {
                }));
            });
        }

        public void AnimateViewFour ()
        {

            flashDotsFirstTimer = NSTimer.CreateScheduledTimer (.5, delegate {
                UIView.AnimateKeyframes (1.5, 0, UIViewKeyframeAnimationOptions.OverrideInheritedDuration, () => {
                    UIView.AddKeyframeWithRelativeStartTime (0, .5, () => {
                        swipeDotView.Alpha = 0.4f;
                    });

                    UIView.AddKeyframeWithRelativeStartTime (.5, .5, () => {
                        swipeDotView.Alpha = 1.0f;
                    });
                }, ((bool finished) => {
                }));
            });

            swipeLeftTimer = NSTimer.CreateScheduledTimer (3, delegate {
                UIView.AnimateKeyframes (.7, 0, UIViewKeyframeAnimationOptions.OverrideInheritedDuration, () => {
                    UIView.AddKeyframeWithRelativeStartTime (0, 1, () => {
                        swipeDotView.Center = new CGPoint (swipeDotView.Center.X - swipeLeftImageView.Frame.Width, swipeDotView.Center.Y);
                        swipeLeftImageView.Center = new CGPoint (swipeLeftImageView.Center.X - swipeLeftImageView.Frame.Width, swipeLeftImageView.Center.Y);
                        emailCellView.Center = new CGPoint (emailCellView.Center.X - swipeLeftImageView.Frame.Width, emailCellView.Center.Y);
                        swipeDotView.Alpha = 0.0f;
                    });

                }, ((bool finished) => {
                }));
            });

            revertLeftToCenterTimer = NSTimer.CreateScheduledTimer (4.5, delegate {
                UIView.AnimateKeyframes (.7, 0, UIViewKeyframeAnimationOptions.OverrideInheritedDuration, () => {
                    UIView.AddKeyframeWithRelativeStartTime (0, 1, () => {
                        swipeDotView.Center = new CGPoint (swipeDotView.Center.X + swipeLeftImageView.Frame.Width, swipeDotView.Center.Y);
                        swipeLeftImageView.Center = new CGPoint (swipeLeftImageView.Center.X + swipeLeftImageView.Frame.Width, swipeLeftImageView.Center.Y);
                        emailCellView.Center = new CGPoint (emailCellView.Center.X + swipeLeftImageView.Frame.Width, emailCellView.Center.Y);
                    });

                }, ((bool finished) => {

                }));
            });

            moveDotsTimer = NSTimer.CreateScheduledTimer (5.2, delegate {
                UIView.AnimateKeyframes (.2, 0, UIViewKeyframeAnimationOptions.OverrideInheritedDuration, () => {
                    UIView.AddKeyframeWithRelativeStartTime (0, 1, () => {
                        swipeDotView.Center = new CGPoint (swipeDotCenter.X - 70 * GetImageScale (), swipeDotCenter.Y);
                    });

                }, ((bool finished) => {

                }));
            });


            flashDotsSecondTimer = NSTimer.CreateScheduledTimer (5.7, delegate {
                UIView.AnimateKeyframes (1.7, 0, UIViewKeyframeAnimationOptions.OverrideInheritedDuration, () => {

                    UIView.AddKeyframeWithRelativeStartTime (0, .5, () => {
                        swipeDotView.Alpha = 0.4f;
                    });

                    UIView.AddKeyframeWithRelativeStartTime (.5, .5, () => {
                        swipeDotView.Alpha = 1.0f;
                    });
                }, ((bool finished) => {
                }));
            });

            swipeRightTimer = NSTimer.CreateScheduledTimer (7.6, delegate {
                UIView.AnimateKeyframes (.8, 0, UIViewKeyframeAnimationOptions.OverrideInheritedDuration, () => {
                    UIView.AddKeyframeWithRelativeStartTime (0, 1, () => {
                        swipeDotView.Center = new CGPoint (swipeDotView.Center.X + swipeLeftImageView.Frame.Width, swipeDotView.Center.Y);
                        emailCellView.Center = new CGPoint (emailCellView.Center.X + swipeLeftImageView.Frame.Width, emailCellView.Center.Y);
                        swipeRightImageView.Center = new CGPoint (swipeRightImageView.Center.X + swipeLeftImageView.Frame.Width, swipeRightImageView.Center.Y);
                    });

                }, ((bool finished) => {
                }));
            });

            revertRightToCenterTimer = NSTimer.CreateScheduledTimer (9.1, delegate {
                UIView.AnimateKeyframes (.8, 0, UIViewKeyframeAnimationOptions.OverrideInheritedDuration, () => {
                    UIView.AddKeyframeWithRelativeStartTime (0, 1, () => {
                        emailCellView.Center = new CGPoint (emailCellView.Center.X - swipeLeftImageView.Frame.Width, emailCellView.Center.Y);
                        swipeRightImageView.Center = new CGPoint (swipeRightImageView.Center.X - swipeLeftImageView.Frame.Width, swipeRightImageView.Center.Y);
                    });
                }, ((bool finished) => {
                }));
            });
        }

        protected void ResetViewZero ()
        {
            if (null != viewZeroTimer) {
                viewZeroTimer.Invalidate ();
            }

            viewZeroShouldAnimate = false;

            //Cancel any live animations
            swipeLabel.Layer.RemoveAllAnimations ();

            //Place items back to original position
            swipeLabel.Center = swipeLabelCenter;
            swipeLabel.Alpha = 0.0f;

            for (int i = 0; i < 10; i++) {
                swipeLeftArrows [i].Layer.RemoveAllAnimations ();
                swipeLeftArrows [i].Alpha = 0.0f;
            }
        }

        protected void ResetViewOne ()
        {
            //Disable any active timers
            if (null != toolTipTimer) {
                toolTipTimer.Invalidate ();
            }

            //Cancel any live animations
            redButton.Layer.RemoveAllAnimations ();
            redToolTip.Layer.RemoveAllAnimations ();
            greenButton.Layer.RemoveAllAnimations ();
            greenToolTip.Layer.RemoveAllAnimations ();

            //Place items back to original position
            redButton.Layer.Transform = CATransform3D.MakeScale (0.0f, 0.0f, 1.0f);
            redToolTip.Layer.Transform = CATransform3D.MakeScale (0.0f, 0.0f, 1.0f);
            greenButton.Layer.Transform = CATransform3D.MakeScale (0.0f, 0.0f, 1.0f);
            greenToolTip.Layer.Transform = CATransform3D.MakeScale (0.0f, 0.0f, 1.0f);
        }

        protected void ResetViewTwo ()
        {
            //Disable any active timers
            if (null != flashOneTimer) {
                flashOneTimer.Invalidate ();
            }
            if (null != swipeMailUpTimer) {
                swipeMailUpTimer.Invalidate ();
            }
            if (null != flashTwoTimer) {
                flashTwoTimer.Invalidate ();
            }
            if (null != swipeMailDownTimer) {
                swipeMailDownTimer.Invalidate ();
            }

            //Cancel any live animations
            nachoCardOne.Layer.RemoveAllAnimations ();
            nachoCardTwo.Layer.RemoveAllAnimations ();
            mailRedDot.Layer.RemoveAllAnimations ();

            //Move items back to original position
            nachoCardOne.Center = nachoCardOneCenter;
            nachoCardTwo.Center = nachoCardTwoCenter;
            mailRedDot.Center = mailRedDotCenter;
        }

        protected void ResetViewThree ()
        {
            if (null != flashPullDotTimer) {
                flashPullDotTimer.Invalidate ();
            }

            pullDownDotView.Layer.RemoveAllAnimations ();
            meetingMessage.Layer.RemoveAllAnimations ();

            pullDownDotView.Layer.Transform = CATransform3D.MakeScale (0.0f, 0.0f, 1.0f);
            meetingMessage.Layer.Transform = CATransform3D.MakeScale (0.0f, 0.0f, 1.0f);
            calendarMessage.Layer.Transform = CATransform3D.MakeScale (0.0f, 0.0f, 1.0f);
            calendarDotView.Layer.Transform = CATransform3D.MakeScale (0.0f, 0.0f, 1.0f);
        }

        protected void ResetViewFour ()
        {
            //Disable any active timers
            if (null != flashDotsFirstTimer) {
                flashDotsFirstTimer.Invalidate ();
            }
            if (null != swipeLeftTimer) {
                swipeLeftTimer.Invalidate ();
            }
            if (null != revertLeftToCenterTimer) {
                revertLeftToCenterTimer.Invalidate ();
            }

            if (null != moveDotsTimer) {
                moveDotsTimer.Invalidate ();
            }

            if (null != flashDotsSecondTimer) {
                flashDotsSecondTimer.Invalidate ();
            }
            if (null != swipeRightTimer) {
                swipeRightTimer.Invalidate ();

            }
            if (null != revertRightToCenterTimer) {
                revertRightToCenterTimer.Invalidate ();
            } 

            //Cancel any live animations
            swipeLeftImageView.Layer.RemoveAllAnimations ();
            swipeRightImageView.Layer.RemoveAllAnimations ();
            emailCellView.Layer.RemoveAllAnimations ();
            swipeDotView.Layer.RemoveAllAnimations ();

            //Move items back to original position
            swipeLeftImageView.Center = swipeLeftCenter;
            swipeRightImageView.Center = swipeRightCenter;
            emailCellView.Center = emailCellViewCenter;
            swipeDotView.Center = swipeDotCenter;
        }
    }
}
