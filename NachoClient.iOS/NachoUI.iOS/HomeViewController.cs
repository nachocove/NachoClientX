// This file has been autogenerated from a class added in the UI designer.

using System;
using MonoTouch.Foundation;
using MonoTouch.UIKit;
using NachoCore.Model;

namespace NachoClient.iOS
{
    public partial class HomeViewController : UIViewController
    {
        AppDelegate appDelegate { get; set; }

        public HomeViewController (IntPtr handle) : base (handle)
        {
            Console.WriteLine ("HomeViewController initialized");
            appDelegate = (AppDelegate)UIApplication.SharedApplication.Delegate;
        }

        public override void ViewDidLoad ()
        {
            base.ViewDidLoad ();

//            if (0 == appDelegate.Be.Db.Table<NcAccount> ().Count ()) {
//                UIStoryboard storyboard = UIStoryboard.FromName ("MainStoryboard_iPhone", null);
//                var rootControllerView = (UIViewController)storyboard.InstantiateViewController ("Login_Storyboard");
//                appDelegate.Window = new UIWindow (UIScreen.MainScreen.Bounds);
//                appDelegate.Window.RootViewController = rootControllerView;
//                appDelegate.Window.MakeKeyAndVisible ();
//            } else {
//                UIStoryboard storyboard = UIStoryboard.FromName ("MainStoryboard_iPhone", null);
//                var rootControllerView = (UIViewController)storyboard.InstantiateViewController ("LaunchAccount_Storyboard");
//                appDelegate.Window = new UIWindow (UIScreen.MainScreen.Bounds);
//                appDelegate.Window.RootViewController = rootControllerView;
//                appDelegate.Window.MakeKeyAndVisible ();
//            }
            if (0 == appDelegate.Be.Db.Table<NcAccount> ().Count ()) {
                PerformSegue ("HomeToLaunch", this);
            } else {
                PerformSegue ("HomeToAccounts", this);
            }
        }
    }
}
