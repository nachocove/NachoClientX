// This file has been autogenerated from a class added in the UI designer.

using System;
using CoreGraphics;
using System.Collections.Generic;
using Foundation;
using UIKit;
using NachoCore.Brain;
using NachoCore.Model;

namespace NachoClient.iOS
{

    public interface QuickResponseViewControllerDelegate {

        void QuickResponseViewDidSelectResponse (QuickResponseViewController vc, NcQuickResponse.QuickResponse response);
    }

    public partial class QuickResponseViewController : ActionSheetViewController
    {
        public QuickResponseViewControllerDelegate ResponseDelegate;
        public NcQuickResponse.QRTypeEnum ResponseType { 
            get {
                return ResponseGenerator.whatType;
            } 
        }
        private NcQuickResponse ResponseGenerator;

        public QuickResponseViewController (NcQuickResponse.QRTypeEnum responseType) : base ()
        {
            ResponseGenerator = new NcQuickResponse (responseType);
        }

        public override void ViewDidLoad ()
        {
            base.ViewDidLoad ();
            var responses = ResponseGenerator.GetResponseList ();
            for (var i = 0; i < responses.Count; ++i){
                var index = i;
                AddItem (new ActionSheetItem (responses[index].body, () => {
                    var response = responses [index];
                    ResponseDelegate?.QuickResponseViewDidSelectResponse (this, response);
                }));
            }
        }
    }
}
