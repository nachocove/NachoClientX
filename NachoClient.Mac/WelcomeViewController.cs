// This file has been autogenerated from a class added in the UI designer.

using System;

using Foundation;
using AppKit;

using NachoCore.Model;

namespace NachoClient.Mac
{
    public interface WelcomeViewDelegate 
    {
        void WelcomeViewDidContinueWithAccount (McAccount account);
    }
    
	public partial class WelcomeViewController : NSViewController
	{

        WeakReference<WelcomeViewDelegate> _WelcomeDelegate;
        public WelcomeViewDelegate WelcomeDelegate {
            get {
                WelcomeViewDelegate d;
                if (_WelcomeDelegate.TryGetTarget(out d)){
                    return d;
                }
                return null;
            }
            set {
                _WelcomeDelegate = new WeakReference<WelcomeViewDelegate>(value);
            }
        }
       
		public WelcomeViewController (IntPtr handle) : base (handle)
		{
		}

        partial void getStarted (NSObject sender)
        {
            var configAccount = McAccount.GetAccountBeingConfigured ();
//            var mdmAccount = McAccount.GetMDMAccount ();

            WelcomeViewDelegate welcomeDelegate;
            if (_WelcomeDelegate.TryGetTarget(out welcomeDelegate)){
                McAccount account = null;;
                if (configAccount != null) {
                    account = configAccount;
                }
                // TODO: mdm account?
                welcomeDelegate.WelcomeViewDidContinueWithAccount (configAccount);
            }
        }
	}
}
